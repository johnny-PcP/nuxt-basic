# AI åŠ©æ‰‹å°ˆæ¡ˆæŒ‡å¼•

é€™å€‹æª”æ¡ˆæä¾›çµ¦ AI åŠ©æ‰‹ï¼ˆå¦‚ GitHub Copilotï¼‰é—œæ–¼æ­¤å°ˆæ¡ˆçš„é‡è¦è³‡è¨Šã€‚

## å°ˆæ¡ˆç‰¹æ®Šè¨­å®š

### ğŸš« é—œéµé™åˆ¶ï¼šNO AUTO IMPORT

æ­¤å°ˆæ¡ˆ**å®Œå…¨ç¦ç”¨**äº† Nuxt 3 çš„è‡ªå‹•å°å…¥åŠŸèƒ½ï¼š

- `imports.autoImport: false` åœ¨ nuxt.config.ts
- `components: false` åœ¨ nuxt.config.ts
- æ‰€æœ‰ Vueã€Nuxtã€ç¬¬ä¸‰æ–¹åº«çš„å‡½æ•¸éƒ½å¿…é ˆæ‰‹å‹•å°å…¥

### âœ… å¿…é ˆéµå¾ªçš„å°å…¥æ¨¡å¼

#### Vue 3 Composition API

```typescript
import { ref, reactive, computed, watch, onMounted, nextTick } from 'vue';
```

#### Nuxt 3 æ ¸å¿ƒåŠŸèƒ½

```typescript
import { useRuntimeConfig, navigateTo, createError } from '#app';
import { $fetch } from 'ofetch';
```

#### è·¯ç”±å’Œç‹€æ…‹ç®¡ç†

```typescript
import { useRoute, useRouter } from 'vue-router';
```

#### å°ˆæ¡ˆå…§éƒ¨æ¨¡çµ„

```typescript
import { userApi } from '~/service/api/user';
import type { User, CreateUserInput } from '~/service/schema/user';
import { useProjectConfig } from '~/composables/useProjectConfig';
```

## å¼·åˆ¶æ¶æ§‹è¦ç¯„

### 1. Service å±¤å¿…é ˆä½¿ç”¨ Zod é©—è­‰

```typescript
// âœ… æ­£ç¢ºï¼šæ‰€æœ‰ API éƒ½å¿…é ˆä½¿ç”¨ Zod é©—è­‰
async getUsers(): Promise<UserList> {
  const response = await $fetch('/users.json')
  return UserListSchema.parse(response)  // å¿…é ˆæœ‰é€™è¡Œ
}

// âŒ éŒ¯èª¤ï¼šç›´æ¥å›å‚³æœªé©—è­‰çš„è³‡æ–™
async getUsers() {
  return await $fetch('/users.json')  // ç¼ºå°‘ Zod é©—è­‰
}
```

### 2. é…ç½®ç®¡ç†è¦ç¯„

```typescript
// âœ… æ­£ç¢ºï¼šä½¿ç”¨é…ç½®ç®¡ç†  const projectConfig = useProjectConfig();
const response = await $fetch('/users', { baseURL: projectConfig.baseURL });

// âŒ éŒ¯èª¤ï¼šç¡¬ç·¨ç¢¼ URL
const response = await $fetch('http://localhost:3000/api/users');
```

### 3. å‹åˆ¥å®‰å…¨è¦æ±‚

```typescript
// âœ… æ­£ç¢ºï¼šä½¿ç”¨ Zod æ¨å°çš„å‹åˆ¥
import type { User } from '~/service/schema/user';
const users = ref<User[]>([]);

// âŒ éŒ¯èª¤ï¼šä½¿ç”¨ any æˆ–æ‰‹å‹•å®šç¾©å‹åˆ¥
const users = ref<any>([]);
```

## å¸¸è¦‹éŒ¯èª¤æ¨¡å¼ - é¿å…é€™äº›ï¼

### âŒ è‡ªå‹•å°å…¥ç›¸é—œéŒ¯èª¤

```typescript
// é€™äº›æœƒå°è‡´ "xxx is not defined" éŒ¯èª¤
const config = useRuntimeConfig(); // useRuntimeConfig is not defined
const route = useRoute(); // useRoute is not defined
const data = ref([]); // ref is not defined
```

### âŒ ç¼ºå°‘ Zod é©—è­‰

```typescript
// ç›´æ¥ä½¿ç”¨ API è³‡æ–™è€Œä¸é©—è­‰
const users = await $fetch('/api/users');
// æ‡‰è©²è¦: UserListSchema.parse(await $fetch('/api/users'))
```

### âŒ ç¡¬ç·¨ç¢¼é…ç½®

```typescript
// ä¸è¦åœ¨ç¨‹å¼ç¢¼ä¸­ç¡¬ç·¨ç¢¼ URL æˆ–è¨­å®š
const baseURL = 'http://localhost:3000';
```

## æ­£ç¢ºçš„é–‹ç™¼æ¨¡å¼

### Vue å…ƒä»¶ç¯„æœ¬

```vue
<script setup lang="ts">
// 1. æ‰‹å‹•å°å…¥ Vue åŠŸèƒ½
import { ref, onMounted, computed } from 'vue';

// 2. æ‰‹å‹•å°å…¥ Nuxt åŠŸèƒ½
import { useRuntimeConfig } from '#app';

// 3. å°å…¥å°ˆæ¡ˆæ¨¡çµ„
import { userApi } from '~/service/api/user';
import type { User } from '~/service/schema/user';

// 4. ä½¿ç”¨é…ç½®ç®¡ç†
const projectConfig = computed(() => userApi.getConfig());

// 5. éŸ¿æ‡‰å¼è³‡æ–™
const users = ref<User[]>([]);

// 6. ç”Ÿå‘½é€±æœŸ
onMounted(async () => {
  try {
    users.value = await userApi.getUsers(); // å·²ç¶“åŒ…å« Zod é©—è­‰
  } catch (error) {
    console.error('è¼‰å…¥å¤±æ•—:', error);
  }
});
</script>
```

### API æœå‹™ç¯„æœ¬

```typescript
import { $fetch } from 'ofetch';
import { useProjectConfig } from '~/composables/useProjectConfig';
import { UserSchema, UserListSchema } from '../schema/user';
import type { User, UserList } from '../schema/user';

export class UserApi {
  private getProjectConfig() {
    return useProjectConfig();
  }

  async getUsers(): Promise<UserList> {
    const config = this.getProjectConfig();
    const response = await $fetch('/users.json', {
      baseURL: config.baseURL,
    });
    return UserListSchema.parse(response); // å¿…é ˆé©—è­‰
  }
}
```

## ç’°å¢ƒé…ç½®

- ä½¿ç”¨ `.env` æ–‡ä»¶ç®¡ç†é…ç½®
- æ”¯æ´ development/docker/production ç’°å¢ƒ
- æ‰€æœ‰é…ç½®éƒ½é€šé useProjectConfig() å­˜å–

## æ¸¬è©¦å’Œé™¤éŒ¯

- è¨ªå• `/myTest` é é¢é€²è¡ŒåŠŸèƒ½æ¸¬è©¦
- æª¢æŸ¥ç€è¦½å™¨æ§åˆ¶å°ç¢ºèªé…ç½®æ­£ç¢º
- ä½¿ç”¨ Zod é©—è­‰æ¸¬è©¦åŠŸèƒ½ç¢ºèª Schema æ­£ç¢ºæ€§

è¨˜ä½ï¼šé€™å€‹å°ˆæ¡ˆçš„æ ¸å¿ƒæ˜¯å±•ç¤ºåœ¨æ²’æœ‰è‡ªå‹•å°å…¥çš„ç’°å¢ƒä¸‹ï¼Œå¦‚ä½•å»ºç«‹ç©©å¥ã€é¡å‹å®‰å…¨çš„ Service å±¤æ¶æ§‹ï¼
